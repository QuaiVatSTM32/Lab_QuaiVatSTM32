/*
 * input_processing.c
 *
 *  Created on: Nov 14, 2022
 *      Author: Admin
 */

#include "input_processing.h"


enum ButtonState { BUTTON_RELEASED , BUTTON_PRESSED ,
BUTTON_PRESSED_MORE_THAN_1_SECOND };

enum ButtonState buttonState = BUTTON_RELEASED ;

void fsm_automatic(void){
	if(buttonState == BUTTON_RELEASED){
		if(timer_flag[0] == 1){
			setTimer0(1000);
			//TODO
			HAL_GPIO_TogglePin(LED_RED1_GPIO_Port, LED_RED1_Pin);
		}
	}
}
void fsm_manual(void){

}

void fsm_for_input_processing ( void ){
	switch ( buttonState ){
		case BUTTON_RELEASED :
			if( is_button_pressed (0)){
				buttonState = BUTTON_PRESSED ;
				// INCREASE VALUE OF PORT A BY ONE UNIT
			}
			break ;
		case BUTTON_PRESSED :
			if (! is_button_pressed (0)){
				buttonState = BUTTON_RELEASED ;
				setTimer0(5000);
				//TODO1
				HAL_GPIO_TogglePin(LED_RED1_GPIO_Port, LED_RED1_Pin);
			} else {
				if( is_button_pressed_1s (0) ){
					buttonState = BUTTON_PRESSED_MORE_THAN_1_SECOND ;
				}
			}
			break ;
		case BUTTON_PRESSED_MORE_THAN_1_SECOND :
			if (! is_button_pressed (0)){
				buttonState = BUTTON_RELEASED ;
				setTimer0(5000);
			}
				//TODO2
			break ;
	}
}
